{"version":3,"sources":["store.js","components/shop-header/index.js","components/shop-header/shop-header.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","actions/index.js","utils/compose.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/book-list/book-list.js","components/shopping-cart-table/shopping-cart-table.js","components/shopping-cart-table/index.js","components/pages/home-page.js","components/pages/cart-page.js","components/app/index.js","components/app/app.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/book-list.js","reducers/shopping-cart.js","reducers/index.js","index.js"],"names":["timeout","ShopHeader","_ref","numItems","total","react_default","a","createElement","className","Link","to","BookListItem","book","onAddedToCart","title","author","coverImage","price","src","alt","onClick","_React$createContext","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","Object","assign","booksLoaded","newBooks","type","payload","booksError","error","bookAddedToCart","bookId","fetchBooks","dispatch","getBooks","then","data","catch","err","compose","_len","arguments","length","funcs","Array","_key","comp","reduceRight","wrapped","f","Spinner","ErrorIndicator","BookList","books","map","key","id","components_book_list_item","BookListContainer","_Component","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","inherits","createClass","value","_this$props","loading","components_spinner","components_error_indicator","book_list_BookList","Component","connect","_ref2","_ref2$bookList","bookList","_ref3","bindActionCreators","mapDispatchToProps","onIncrease","onDecrease","onDelete","ShoppingCartTable","_ref2$shoppingCart","shoppingCart","items","cartItems","orderTotal","item","idx","count","width","HomePage","book_list_book_list","components_shopping_cart_table","CartPage","App","role","components_shop_header","Switch","Route","path","component","exact","ErrorBoundry","_getPrototypeOf2","_this","args","call","concat","state","hasError","setState","children","BookstoreService","Promise","resolve","reject","setTimeout","Math","random","Error","updateBookList","action","undefined","updateCartItems","toConsumableArray","slice","updateOrder","quantity","find","itemIndex","findIndex","newItem","_item$id","_item$count","_item$title","_item$total","updateCartItem","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddlawe","next","getState","console","log","ReactDOM","render","es","error_boundry_ErrorBoundry","BrowserRouter","components_app","document","getElementById"],"mappings":"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","file":"static/js/main.d8de14a5.chunk.js","sourcesContent":["import { createStore, applyMiddleware } from \"redux\";\r\nimport thunkMiddlawe from \"redux-thunk\";\r\n\r\nimport reducer from \"./reducers\";\r\n\r\nconst logMiddleware = ({ getState }) => (next) => (action) => {\r\n  console.log(action.type, getState());\r\n  return next(action);\r\n};\r\n\r\nconst stringMiddleware = () => (next) => (action) => {\r\n  if (typeof action === \"string\") {\r\n    return next({\r\n      type: action,\r\n    });\r\n  }\r\n\r\n  return next(action);\r\n};\r\n\r\nconst store = createStore(\r\n  reducer,\r\n  applyMiddleware(thunkMiddlawe, stringMiddleware, logMiddleware)\r\n);\r\n\r\n// store.dispatch(\"HELLO_WORLD\");\r\n\r\nconst delayedActionCreator = (timeout) => (dispatch) => {\r\n  setTimeout(\r\n    () =>\r\n      dispatch({\r\n        type: \"DELAYED_ACTION\",\r\n      }),\r\n    timeout\r\n  );\r\n};\r\n\r\nstore.dispatch(delayedActionCreator(3000));\r\n\r\nexport default store;\r\n","import ShopHeader from \"./shop-header\";\r\n\r\nexport default ShopHeader;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport \"./shop-header.css\";\r\n\r\nconst ShopHeader = ({ numItems, total }) => {\r\n  return (\r\n    <header className=\"shop-header row\">\r\n      <Link to=\"/\" className=\"logo text-dark\">\r\n        ReStore\r\n      </Link>\r\n      <Link to=\"/cart\" className=\"shopping-cart\">\r\n        <i className=\"cart-icon fa fa-shopping-cart\"></i>\r\n        {numItems} intems (${total})\r\n      </Link>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default ShopHeader;\r\n","import BookListItem from \"./book-list-item\";\r\n\r\nexport default BookListItem;\r\n","import React from \"react\";\r\n\r\nimport \"./book-list-item.css\";\r\n\r\nconst BookListItem = ({ book, onAddedToCart }) => {\r\n  const { title, author, coverImage, price } = book;\r\n  return (\r\n    <div className=\"book-list-item\">\r\n      <div className=\"book-cover\">\r\n        <img src={coverImage} alt={title} className=\"book-list-image\" />\r\n      </div>\r\n      <div className=\"book-details\">\r\n        <span className=\"book-title\">{title}</span>\r\n        <span className=\"book-author\">{author}</span>\r\n        <div className=\"book-price\">${price}</div>\r\n        <button onClick={onAddedToCart} className=\"btn btn-info add-to-cart\">\r\n          Add to cart\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookListItem;\r\n","import React from 'react';\r\n\r\nconst {\r\n  Provider: BookstoreServiceProvider,\r\n  Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n  BookstoreServiceProvider,\r\n  BookstoreServiceConsumer\r\n};\r\n","import React from 'react';\r\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n\r\n  return (props) => {\r\n    return (\r\n      <BookstoreServiceConsumer>\r\n        {\r\n          (bookstoreService) => {\r\n            return (<Wrapped {...props}\r\n                     bookstoreService={bookstoreService}/>);\r\n          }\r\n        }\r\n      </BookstoreServiceConsumer>\r\n    );\r\n  }\r\n};\r\n\r\nexport default withBookstoreService;\r\n","const booksRequested = () => {\r\n  return {\r\n    type: \"FETCH_BOOKS_REQUESTED\",\r\n  };\r\n};\r\nconst booksLoaded = (newBooks) => {\r\n  return {\r\n    type: \"FETCH_BOOKS_SUCCESS\",\r\n    payload: newBooks,\r\n  };\r\n};\r\n\r\nconst booksError = (error) => {\r\n  return {\r\n    type: \"FETCH_BOOKS_FAILURE\",\r\n    payload: error,\r\n  };\r\n};\r\n\r\nconst bookAddedToCart = (bookId) => {\r\n  return {\r\n    type: \"BOOK_ADDED_TO_CART\",\r\n    payload: bookId,\r\n  };\r\n};\r\n\r\nconst bookRemovedFromCart = (bookId) => {\r\n  return {\r\n    type: \"BOOK_REMOVED_FROM_CART\",\r\n    payload: bookId,\r\n  };\r\n};\r\n\r\nconst allBookRemovedFromCart = (bookId) => {\r\n  return {\r\n    type: \"ALL_BOOK_REMOVED_FROM_CART\",\r\n    payload: bookId,\r\n  };\r\n};\r\n\r\nconst fetchBooksOld = (bookstoreService, dispatch) => () => {\r\n  dispatch(booksRequested());\r\n  bookstoreService\r\n    .getBooks()\r\n    .then((data) => dispatch(booksLoaded(data)))\r\n    .catch((err) => dispatch(booksError(err)));\r\n};\r\n\r\nconst fetchBooks = (bookstoreService) => () => (dispatch) => {\r\n  dispatch(booksRequested());\r\n  bookstoreService\r\n    .getBooks()\r\n    .then((data) => dispatch(booksLoaded(data)))\r\n    .catch((err) => dispatch(booksError(err)));\r\n};\r\n\r\nexport {\r\n  fetchBooks,\r\n  bookAddedToCart,\r\n  bookRemovedFromCart,\r\n  allBookRemovedFromCart,\r\n};\r\n","const compose = (...funcs) => (comp) => {\r\n  return funcs.reduceRight((wrapped, f) => f(wrapped), comp);\r\n};\r\n\r\nexport default compose;\r\n","import Spinner from './spinner';\r\n\r\nexport default Spinner;\r\n","import React from \"react\";\r\nimport \"./spinner.css\";\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"spinner\">\r\n      <div className=\"lds-hourglass\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner;\r\n","import ErrorIndicator from './error-indicator';\r\n\r\nexport default ErrorIndicator;\r\n","import React from 'react';\r\nimport './error-indicator.css';\r\n\r\nconst ErrorIndicator = () => {\r\n  return <div>Error!</div>;\r\n};\r\n\r\nexport default ErrorIndicator;\r\n","import React, { Component } from \"react\";\r\nimport BookListItem from \"../book-list-item\";\r\n\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { withBookstoreService } from \"../hoc\";\r\nimport { fetchBooks, bookAddedToCart } from \"../../actions\";\r\nimport { compose } from \"../../utils\";\r\n\r\nimport Spinner from \"../spinner\";\r\nimport ErrorIndicator from \"../error-indicator\";\r\n\r\nimport \"./book-list.css\";\r\n\r\nconst BookList = ({ books, onAddedToCart }) => {\r\n  return (\r\n    <ul className=\"book-list\">\r\n      {books.map((book) => {\r\n        return (\r\n          <li key={book.id}>\r\n            <BookListItem\r\n              book={book}\r\n              onAddedToCart={() => onAddedToCart(book.id)}\r\n            />\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nclass BookListContainer extends Component {\r\n  componentDidMount() {\r\n    this.props.fetchBooks();\r\n  }\r\n\r\n  render() {\r\n    const { books, loading, error, onAddedToCart } = this.props;\r\n    if (loading) return <Spinner />;\r\n\r\n    if (error) return <ErrorIndicator />;\r\n\r\n    return <BookList books={books} onAddedToCart={onAddedToCart} />;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\r\n  return {\r\n    books,\r\n    loading,\r\n    error,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\r\n  return bindActionCreators(\r\n    {\r\n      // fetchBooks: fetchBooks(bookstoreService, dispatch),\r\n      fetchBooks: fetchBooks(bookstoreService),\r\n      onAddedToCart: bookAddedToCart,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nexport default compose(\r\n  withBookstoreService(),\r\n  connect(mapStateToProps, mapDispatchToProps)\r\n)(BookListContainer);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  bookAddedToCart,\r\n  bookRemovedFromCart,\r\n  allBookRemovedFromCart,\r\n} from \"../../actions\";\r\n\r\nimport \"./shopping-cart-table.css\";\r\n\r\nconst ShoppingCartTable = ({\r\n  items,\r\n  total,\r\n  onIncrease,\r\n  onDecrease,\r\n  onDelete,\r\n}) => {\r\n  const renderRow = (item, idx) => {\r\n    const { id, title, count, total } = item;\r\n    return (\r\n      <tr key={id}>\r\n        <td>{idx + 1}</td>\r\n        <td>{title}</td>\r\n        <td>{count}</td>\r\n        <td>${total}</td>\r\n        <td width=\"130\">\r\n          <button\r\n            onClick={() => onDelete(id)}\r\n            className=\"btn btn-outline-danger btn-sm float-right\"\r\n          >\r\n            <i className=\"fa fa-trash-o\" />\r\n          </button>\r\n          <button\r\n            onClick={() => onIncrease(id)}\r\n            className=\"btn btn-outline-success btn-sm float-right\"\r\n          >\r\n            <i className=\"fa fa-plus-circle\" />\r\n          </button>\r\n          <button\r\n            onClick={() => onDecrease(id)}\r\n            className=\"btn btn-outline-warning btn-sm float-right\"\r\n          >\r\n            <i className=\"fa fa-minus-circle\" />\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"shopping-cart-table\">\r\n      <h2>Your Order</h2>\r\n\r\n      <table className=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <th>#</th>\r\n            <th>Item</th>\r\n            <th>Count</th>\r\n            <th>Price</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>{items.map(renderRow)}</tbody>\r\n      </table>\r\n\r\n      <div className=\"total\">Total: ${total}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\r\n  return {\r\n    items: cartItems,\r\n    total: orderTotal,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  onIncrease: bookAddedToCart,\r\n  onDecrease: bookRemovedFromCart,\r\n  onDelete: allBookRemovedFromCart,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\r\n","import ShoppingCartTable from \"./shopping-cart-table\";\r\n\r\nexport default ShoppingCartTable;\r\n","import React from \"react\";\r\nimport BookList from \"../book-list/book-list\";\r\nimport ShoppingCartTable from \"../shopping-cart-table\";\r\n\r\nconst HomePage = () => {\r\n  return (\r\n    <div>\r\n      <BookList />\r\n      <ShoppingCartTable />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import React from \"react\";\r\n\r\nconst CartPage = () => {\r\n  return <div className=\"jumbotron\">Cart page</div>;\r\n};\r\n\r\nexport default CartPage;\r\n","import App from './app';\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport ShopHeader from \"../shop-header\";\r\nimport { HomePage, CartPage } from \"../pages\";\r\n\r\nimport \"./app.css\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <main role=\"main\" className=\"container\">\r\n      <ShopHeader numItems={5} total={210} />\r\n      <Switch>\r\n        <Route path=\"/\" component={HomePage} exact />\r\n        <Route path=\"/cart\" component={CartPage} />\r\n      </Switch>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React, { Component } from 'react';\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nexport default class ErrorBoundry extends Component {\r\n\r\n  state = {\r\n    hasError: false\r\n  };\r\n\r\n  componentDidCatch() {\r\n    this.setState({ hasError: true });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return <ErrorIndicator />;\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}","export default class BookstoreService {\r\n  data = [\r\n    {\r\n      id: 1,\r\n      title: \"Изучаем программирование на JavaScript\",\r\n      author: \"Фримен, Робсон\",\r\n      coverImage:\r\n        \"https://media.proglib.io/posts/2020/02/28/933f353fb3a0e42c0eb57ee01b9c2d90.jpg\",\r\n      price: 32,\r\n    },\r\n    {\r\n      id: 2,\r\n      title: \"JavaScript для чайников\",\r\n      author: \"Минник, Холланд\",\r\n      coverImage:\r\n        \"https://media.proglib.io/posts/2020/03/01/8a2f3a927258b1ae95c883de5ac39809.jpg\",\r\n      price: 32,\r\n    },\r\n    {\r\n      id: 3,\r\n      title: \"Как устроен JavaScript\",\r\n      author: \"Д. Крокфорд\",\r\n      coverImage:\r\n        \"https://media.proglib.io/posts/2020/03/01/45071669da85a82be087e48ae586e750.jpg\",\r\n      price: 34,\r\n    },\r\n    {\r\n      id: 4,\r\n      title:\r\n        \"Изучаем JavaScript. Руководство по созданию современных веб-сайтов\",\r\n      author: \"Э. Браун\",\r\n      coverImage:\r\n        \"https://media.proglib.io/posts/2020/02/28/98b63ff1a155e950a49f2b3124fb1d62.jpg\",\r\n      price: 50,\r\n    },\r\n  ];\r\n\r\n  getBooks() {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        if (Math.random() > 0.75) {\r\n          reject(new Error(\"Something bad happened\"));\r\n        } else {\r\n          resolve(this.data);\r\n        }\r\n      }, 700);\r\n    });\r\n  }\r\n}\r\n","const updateBookList = (state, action) => {\r\n  if (state === undefined) {\r\n    return {\r\n      books: [],\r\n      loading: true,\r\n      error: null,\r\n    };\r\n  }\r\n\r\n  switch (action.type) {\r\n    case \"FETCH_BOOKS_REQUESTED\":\r\n      return {\r\n        books: [],\r\n        loading: true,\r\n        error: null,\r\n      };\r\n    case \"FETCH_BOOKS_SUCCESS\":\r\n      return {\r\n        books: action.payload,\r\n        loading: false,\r\n        error: null,\r\n      };\r\n    case \"FETCH_BOOKS_FAILURE\":\r\n      return {\r\n        books: [],\r\n        loading: false,\r\n        error: action.payload,\r\n      };\r\n\r\n    default:\r\n      return state.bookList;\r\n  }\r\n};\r\n\r\nexport default updateBookList;\r\n","const updateCartItems = (cartItems, item, idx) => {\r\n  if (item.count === 0) {\r\n    return [...cartItems.slice(0, idx), ...cartItems.slice(idx + 1)];\r\n  }\r\n\r\n  if (idx === -1) {\r\n    return [...cartItems, item];\r\n  }\r\n\r\n  return [...cartItems.slice(0, idx), item, ...cartItems.slice(idx + 1)];\r\n};\r\n\r\nconst updateCartItem = (book, item = {}, quantity) => {\r\n  const { id = book.id, count = 0, title = book.title, total = 0 } = item;\r\n\r\n  return {\r\n    id,\r\n    title,\r\n    count: count + quantity,\r\n    total: total + quantity * book.price,\r\n  };\r\n};\r\n\r\nconst updateOrder = (state, bookId, quantity) => {\r\n  const {\r\n    bookList: { books },\r\n    shoppingCart: { cartItems },\r\n  } = state;\r\n\r\n  const book = books.find(({ id }) => id === bookId);\r\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\r\n  const item = cartItems[itemIndex];\r\n\r\n  const newItem = updateCartItem(book, item, quantity);\r\n  return {\r\n    orderTotal: 0,\r\n    cartItems: updateCartItems(cartItems, newItem, itemIndex),\r\n  };\r\n};\r\n\r\nconst updateShoppingCart = (state, action) => {\r\n  if (state === undefined) {\r\n    return {\r\n      cartItems: [],\r\n      orderTotal: 0,\r\n    };\r\n  }\r\n\r\n  switch (action.type) {\r\n    case \"BOOK_ADDED_TO_CART\":\r\n      return updateOrder(state, action.payload, 1);\r\n\r\n    case \"BOOK_REMOVED_FROM_CART\":\r\n      return updateOrder(state, action.payload, -1);\r\n\r\n    case \"ALL_BOOK_REMOVED_FROM_CART\":\r\n      const item = state.shoppingCart.cartItems.find(\r\n        ({ id }) => id === action.payload\r\n      );\r\n      return updateOrder(state, action.payload, -item.count);\r\n\r\n    default:\r\n      return state.shoppingCart;\r\n  }\r\n};\r\n\r\nexport default updateShoppingCart;\r\n","import updateBookList from \"./book-list\";\r\nimport updateShoppingCart from \"./shopping-cart\";\r\n\r\nconst reducer = (state, action) => {\r\n  return {\r\n    bookList: updateBookList(state, action),\r\n    shoppingCart: updateShoppingCart(state, action),\r\n  };\r\n};\r\n\r\nexport default reducer;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\n\r\nimport App from \"./components/app\";\r\nimport ErrorBoundry from \"./components/error-boundry/error-boundry\";\r\nimport BookstoreService from \"./services/bookstore-service\";\r\nimport { BookstoreServiceProvider } from \"./components/bookstore-service-context\";\r\n\r\nimport store from \"./store\";\r\n\r\nconst bookstoreService = new BookstoreService();\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <ErrorBoundry>\r\n      <BookstoreServiceProvider value={bookstoreService}>\r\n        <Router>\r\n          <App />\r\n        </Router>\r\n      </BookstoreServiceProvider>\r\n    </ErrorBoundry>\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}